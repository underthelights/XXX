<h2 id="equivalence-classes-chapter-46">Equivalence Classes (Chapter 4.6)</h2>

<h3 id="equivalence-classes">Equivalence Classes</h3>

<ul>
  <li>Definition from Wikipedia
    <ul>
      <li>In mathematics, when the elements of some set S have a notion of equivalence (equivalence relation) defined on them, then one may naturally split the set S into equivalence classes.</li>
    </ul>
  </li>
  <li>
    <p>Equivalence relation</p>

    <ul>
      <li>An equivalence relation on a set X is a binary relation ~ on $X$ satisfying the three properties</li>
      <li>$a ~ a$ for all $a \in X$ (reflexivity)</li>
      <li>$a ~ b$ implies $b ~ a$ for all $a$ and $b \in X$(symmetry)</li>
      <li>if $a ~ b$ and $b ~ c$ then $a ~ c$ for all a, b, and c in X (transitivity)</li>
    </ul>
  </li>
  <li>Examples
    <ul>
      <li>If $X$ is the set of all cars, and ~ is the equivalence relation “has the same color as”, then on particular equivalence class consists of all green cars.</li>
    </ul>
  </li>
  <li>Suppose we have the following set of items, numbered from 0 to 11.
    <ul>
      <li>$S = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11}$</li>
    </ul>
  </li>
  <li>According to some equivalence relation, the following pairs of items are equivalent.
    <ul>
      <li>$(0, 4), (3, 1), (6, 10), (8, 9), (7, 4), (6, 8), (3, 5), (2, 11), (11, 0)$</li>
    </ul>
  </li>
  <li>Then we can we can partition set S into the following equivalence classes.
    <ul>
      <li>${0, 2, 4, 7, 11}$</li>
      <li>${1, 3, 5}$</li>
      <li>${6, 8, 9, 10}$</li>
    </ul>
  </li>
  <li>
    <p>We are going to write a program that finds the equivalence classes from a set of items</p>
  </li>
  <li>Input - number of items
    <ul>
      <li>ex) 12 ,</li>
    </ul>
  </li>
  <li>pairs of equivalent items
    <ul>
      <li>ex) $(0, 4), (3, 1), (6, 10), (8, 9), (7, 4), (6, 8), (3, 5), (2, 11), (11, 0)$</li>
    </ul>
  </li>
  <li>Output - equivalence classes
    <ul>
      <li>$0 2 4 7 11 / 1 3 5 / 6 8 9 10$</li>
    </ul>
  </li>
</ul>

<h4 id="algorithm-for-finding-equivalence-classes">Algorithm for finding equivalence classes</h4>

<ul>
  <li>Input:</li>
  <li>$(0, 4), (3, 1), (6, 10), (8, 9), (7, 4), (6, 8), (3, 5), (2, 11), (11, 0)$</li>
  <li>First Phase
    <ul>
      <li>For each item i, we store all items j that have direct equivalence relationship given by the input.</li>
    </ul>
  </li>
</ul>

<p><img width="427" alt="image-20211003163947067" src="https://user-images.githubusercontent.com/46957634/135752318-ecfda215-df52-40b0-8fe0-3f5e1dc7022a.png" /></p>

<ul>
  <li>
    <p>Second Phase</p>

    <ul>
      <li>
        <p>For 0, we search for all items equivalent with 0.</p>
      </li>
      <li>
        <p>Since 4 and 11 are equivalent with 0, we need to also search for all items equivalent with 4 and 11 as well.</p>
      </li>
      <li>
        <p>Since 7 is equivalent with 4, we need to also search for items equivalent with 7.</p>
      </li>
      <li>
        <p>If we find all items equivalent to 0, then we have found one equivalence class.</p>
      </li>
      <li>
        <p>Then we go to the next item which is not chosen in any equivalence class yet, and do the samething.</p>
      </li>
    </ul>
  </li>
</ul>

<h4 id="implementation">Implementation</h4>

<ul>
  <li>We are going to use an array of linked lists.
    <ul>
      <li>One linked list for each item.</li>
    </ul>
  </li>
  <li>After the first phase, we will have the following structure.</li>
</ul>

<p><img width="427" alt="image-20211003164006712" src="https://user-images.githubusercontent.com/46957634/135752321-e6a24a59-9a3f-4e9e-aacb-8afca99bca55.png" /></p>

<ul>
  <li>
    <p>In the second phase, we need to find all equivalent items of item 0.</p>
  </li>
  <li>
    <p>Then, we should search for equivalent classes of 11 and 4.</p>
  </li>
  <li>
    <p>For this purpose, we are going to use a stack.</p>

    <ul>
      <li>
        <p>When processing the linked list of item 0, we put 11 and 4 into the stack.</p>
      </li>
      <li>
        <p>After we are done with 0, we pop an item from the stack. We get 11.</p>
      </li>
      <li>
        <p>We process equivalent items of 11.</p>
      </li>
      <li>
        <p>Since 0 is already processed, we skip 0.</p>
      </li>
      <li>
        <p>Since 2 is not processed yet, we include 2 in the equivalence class and also put 2 into the stack.</p>
      </li>
      <li>
        <p>When the stack is empty, we have completed an equivalence class.</p>
      </li>
      <li>
        <p>Then we go to the next item that is not processed yet.</p>
      </li>
    </ul>
  </li>
</ul>

<h4 id="equivalence-classex034">Equivalence Class[ex034]</h4>

<script src="https://gist.github.com/underthelights/894363c37b773fac8d4c49fac837c979.js"></script>

<h4 id="analysis">Analysis</h4>

<ul>
  <li>$m$ : number of pairs in the input.</li>
  <li>
    <p>$n$ : number of items.</p>
  </li>
  <li>
    <p>Phase 1</p>

    <ul>
      <li>Initialization of seq and out takes O(n) time.</li>
    </ul>
  </li>
  <li>Inputting equivalence pairs takes O(m) time.
    <ul>
      <li>Total time in phase 1 : O(m + n)</li>
    </ul>
  </li>
  <li>
    <p>Phase 2</p>

    <ul>
      <li>The outer for loop is repeated n times. $O(n)$.</li>
      <li>Inside, each node in the array of linked list structure is processed once.Since there are 2m nodes, the time required is $O(m)$.</li>
      <li>Total time in phase 2 : $O(m + n)$</li>
    </ul>
  </li>
  <li>
    <p>The time complexity of the program for finding equivalence classes : $O(m + n)$</p>
  </li>
  <li>
    <p>Space complexity : $O(m + n)$</p>

    <ul>
      <li>
        <p>$n$ entries in the array of node pointers</p>
      </li>
      <li>
        <p>$2m$ nodes in the linked list structure</p>
      </li>
    </ul>
  </li>
</ul>
